<!DOCTYPE html>
<html>
<head>
    <title>User Lists</title>
    <style>
      table, th, td { border: 1px solid #888; border-collapse: collapse; padding: 4px; }
    </style>
</head>
<body>
    <h1>User Lists</h1>
    <nav>
      <a href="dashboard.html">Dashboard</a>
    </nav>
    <h2>Bus Drivers</h2>
    <table id="driversTable"><tr><th>Name</th><th>License</th><th>Phone</th></tr></table>
    <h2>Busminders</h2>
    <table id="busmindersTable"><tr><th>Name</th><th>Phone</th><th>Email</th><th>ID Number</th></tr></table>
    <h2>Parents</h2>
    <table id="parentsTable"><tr><th>Name</th><th>Username</th></tr></table>
    <h2>Children</h2>
    <table id="childrenTable"><tr><th>Name</th><th>Class</th><th>Parent</th></tr></table>
    <script>
    async function fetchAndFill(url, tableId, rowFn) {
      const res = await fetch(url);
      const data = await res.json();
      const table = document.getElementById(tableId);
      data.forEach(row => table.insertAdjacentHTML('beforeend', rowFn(row)));
    }
    // Adjust these URLs to your backend list endpoints
    fetchAndFill('http://localhost:8000/api/drivers/', 'driversTable', d => `<tr><td>${d.name}</td><td>${d.license_number||''}</td><td>${d.phone_number||''}</td></tr>`);
    fetchAndFill('http://localhost:8000/api/busminders/', 'busmindersTable', b => `<tr><td>${b.name}</td><td>${b.phone_number||''}</td><td>${b.email||''}</td><td>${b.id_number||''}</td></tr>`);
    fetchAndFill('http://localhost:8000/api/parents/', 'parentsTable', p => `<tr><td>${p.name}</td><td>${p.username||''}</td></tr>`);
    fetchAndFill('http://localhost:8000/api/children/', 'childrenTable', c => `<tr><td>${c.name}</td><td>${c.class_grade||''}</td><td>${c.parent_name||''}</td></tr>`);
    </script>
</body>
</html>
